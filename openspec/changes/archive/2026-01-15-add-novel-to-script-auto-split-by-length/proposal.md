## Why

当前 `novel_to_script` 工作流默认是 **1 章（或 1 集小说）= 1 集剧本**。当你希望“短剧每集 500–800 字”并按字数动态拆分时，单靠修改提示词很难稳定实现：
- 程序层面每次只生成/审校/提交“一集”，模型一次输出多集会触发格式/审校失败。
- 需要“先拆分计划 → 再逐集生成”的编排，才能做到动态集数且可重试/可审校/可续跑。

你希望：
- **按提示词中的字数要求**（例如每集 500–800 字）把单章小说拆成多集短剧；
- **总集数动态**（不预先固定 20→60，只由内容量决定）；
- **STEP1（关键剧情梳理）每章一次**；
- **不跨章拆分**（一章的内容只拆成该章的若干剧本集）；
- “字数统计”按：**去掉空格和标点后的字符数**；允许小幅超出上限。

## What Changes

- 为 `novel_to_script` 新增一种可选拆分策略：**按目标字数自动拆集**（动态集数）。
- 工作流对每章新增一个“章级拆分计划”步骤（STEP1 一次）：
  - 输出本章核心关键剧情（事件/冲突/情绪爆点等）
  - 给出本章拆成几集剧本，并为每一集列出覆盖范围与钩子
- 之后按计划逐集生成（每集可包含多个场景块），并进行：
  - **格式硬校验**（集头/场号）
  - **字数硬/软校验**（按“去空格+去标点”统计；允许小幅超出）
  - 不通过则进入修复循环，仅重写当前集
- 运行状态中记录“本章 → 剧本集”的映射，方便复现与导出。
- Web UI 在创建 `小说→剧本` run 时提供一个简单开关：
  - `1章=1集（默认）`
  - `按字数自动拆集（动态）`

## Scope / Non-Goals

- 不实现“跨章拆分”或“全书整体重排拆集”；拆分边界严格在单章内。
- 不要求预设固定总集数；总集数由每章拆分结果动态决定。
- 不对小说生成流程做修改；仅扩展小说→剧本转换流程。

## Impact

- 解决“单章信息量过大导致一集剧本过长/重复/钩子弱”的问题。
- 更贴合短剧生产：按字数密度与节奏拆集，并保持可审校/可重试/可续跑。
